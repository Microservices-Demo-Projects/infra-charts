# Wrapper chart values for Bitnami PostgreSQL.
# This chart is configured for OpenShift by default.
postgresql:
  # OpenShift Compatibility: Scale-to-zero and non-root user support
  # Note: Standard Kubernetes will require these to be true or specific IDs set.
  # In OpenShift, the default SCC handles volume permissions.
  podSecurityContext:
    enabled: false
  containerSecurityContext:
    enabled: false
  volumePermissions:
     enabled: false

  tls:
    enabled: true
    autoGenerated: false
    certificatesSecret: postgres-tls
    certKeyFilename: tls.key
    certFilename: tls.crt
    certCAFilename: ca.crt
  auth:
    enablePostgresUser: true
    existingSecret: postgres-root-password
    secretKeys:
      adminPasswordKey: password

  primary:
    initdb:
      scripts:
        setup-vault-user.sql: |
          CREATE USER vault WITH CREATEDB CREATEROLE;
          GRANT ALL PRIVILEGES ON DATABASE postgres TO vault;